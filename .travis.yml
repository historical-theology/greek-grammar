env:
 - CABALVER=1.22 GHCVER=7.10.1

before_install:
 - travis_retry sudo add-apt-repository -y ppa:hvr/ghc
 - travis_retry sudo apt-get update
 - travis_retry sudo apt-get install cabal-install-$CABALVER ghc-$GHCVER
 - export PATH=/opt/ghc/$GHCVER/bin:/opt/cabal/$CABALVER/bin:$PATH
 - cabal --version
 - ghc --version

 - travis_retry cabal update

 - cabal install --constraint=transformers\ installed happy alex
 - export PATH=$HOME/.cabal/bin:$PATH

install:
 - cabal install --only-dependencies --enable-tests
 - cabal configure --enable-tests

script:
 - cabal build
 - cabal test --show-details=always

notifications:
  flowdock:
    secure: "X64/fWAoHxhaakQWvzu7F59id01OFU/ejvzR58au7NnVmou+IvaUWPsUajA0AXyvfRIGXMc+Sq+1rpQ8LWY8O6BEn5PGP1y4fdiJx3n5Kr7bcGDyXL30BDQDIlMOQtewTDu9Podv9bJBlz7yXnblVzNphekV3OA5ow5i+oXYl5k="
